<html>
<head>
<title>SWISH-E 2</title>
</head>
<body bgcolor="ivory">
<center>
<h1>Compression in swish-2.1.X</h1>
<h2>Why using compression</h2>
</center>
As all of you know, at this moment swish-e stores all the data in just one
index file. This information includes: Header info, words, files and properties.
This means a lot of info.
<br>
Swish-e 2.0.X introduced phrase search to swish-e. So more info (word position for each word
occurence in each file) was added to the index file. Fortunately, this data is
easy to compress and like in 1.3.x all integer numbers are compressed (many integers
fits in just one byte).
<br>
But perhaps your indexed data is really big, and perhaps you also use many properties in the index file and
one day you look at your index file and it is 100 MB long!!. Finally one day uou decide to put all your data 
and their index file in a CD and you simply cannot. 
<br>
Well, this is a extreme case but if you look at the index file you can discover that the
properties stored in it can easily use half of the file. So, they can be easily compressed!!
<center> 
<h2>Compression and swish-e-2.1.X</h2>
</center>
So, I decided to try it. For this purpose, I look at several free compression tools looking for:<br>
- A fast and small library<br>
- Easy to implement<br>
- Swish search performance must not be affected<br>
The first library that came to mid was zlib but it is stream oriented and not easy to use. In the other hand, it is fast and achieves
very good results.
Although it cannot be used because it is stream oriented (Swish search needs to get the data as fast as possible),
its deflate algorithm can be used in a much more simple way. So, I have made a much more simpler (no huffman, no hash, etc)
implementation of the deflate compress algorithm. Also, direct access is implemented to extract the information from the file as faster as possible.
Thus, you must not expect great compression ratios as with gzip or zlib.
<br>
If you set the option, the index proccess should be slower, but the performance of the search should not be affected.
<br>
So, this piece of code would not be possible without Jean-loup Gailly's ZLIB.
If you are interested in zlib's free deflate algorithm look at <a href="www.gzip.org">www.gzip.org</a>
<p>
To set this option add the following line to your config file:<br>
<br>
<i>FileInfoCompression Yes</i><br>
<center>
</center>
</body>
</html>
