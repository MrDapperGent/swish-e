%define	name	@PACKAGE@
%define	version	@VERSION@
%define release 0

Summary:        SWISH-E - Simple Web Indexing System for Humans - Enhanced
Name:           %{name}
Version:        %{version}
Release:        %{release}
License:        GPL
Group:          Networking/Other
Source:         http://swish-e.org/Download/%{name}-%{version}.tar.gz
URL:            http://swish-e.org/
BuildRoot:      %{_tmppath}/%name-root
Packager:       David L Norris <dave@webaugur.com>
Icon:           swish-e.xpm
Vendor:         SWISH-E Team <http://swish-e.org/>
Provides:       %{name}
Obsoletes:	swish
Requires:       libxml2, pcre, zlib
BuildRequires:	libxml2-devel, pcre-devel, zlib-devel
Prefix:         /usr

%description
Swish-e is Simple Web Indexing System for Humans - Enhanced

Swish-e can quickly and easily index directories of files or remote 
web sites and search the generated indexes.

Swish-e is extremely fast in both indexing and searching, highly
configurable, and can be seamlessly integrated with existing web sites
to maintain a consistent design. Swish-e can index web pages, but can
just as easily index text files, mailing list archives, or data stored
in a relational database.

%package doc
Summary:     doc
Group:          Networking/Other
Provides:      %{name}-doc
Requires:     %{name} = %{version}  

%description doc
SWISH-E documentation and examples

%package        perl
Summary:        SWISH-E - PERL Scripts and Modules
Group:          Networking/Other
Provides:       %{name}-perl
Requires:       %{name} = %{version}, perl >= 5.8.0

%description    perl
PERL SWISH-E language bindings and scripts.

%package	devel
Summary:	SWISH-E - Static libraries and header files.
Group:		Networking/Other
Obsoletes:	swish-devel
Provides:       %{name}-devel
Requires:	%{name} = %{version}, libxml2-devel, pcre-devel, zlib-devel

%description	devel
Libraries and header files required for compiling applications based on the SWISH-E API.

%prep
%setup -q

%build
%configure --with-pcre=/usr --with-libxml2=/usr --with-zlib=/usr
make

%install
make DESTDIR=$RPM_BUILD_ROOT prefix=%{prefix} sysconfdir=%{sysconfdir} install

%post	-p /sbin/ldconfig
%postun -p /sbin/ldconfig

%clean
[ "${RPM_BUILD_ROOT}" != "/" ] && [ -d ${RPM_BUILD_ROOT} ] && rm -rf ${RPM_BUILD_ROOT};

%files
%defattr(-, root, root)
%{_bindir}/swish-e
%{_libdir}/*.so.*
%{_mandir}/man[^3]/*

%files doc
%{_datadir}/doc/swish-e/*

%files perl
%defattr(-, root, root)
%{_bindir}/swish-filter-test
%{_libdir}/swish-e/*
%{_datadir}/swish-e/*

%files devel
%defattr(-, root, root)
#%{_mandir}/man3/*
%{_includedir}/*.h
%{_libdir}/*.la
%{_libdir}/*.a
%{_libdir}/*.so

%changelog
* Sun Jul 11 2004 David L Norris <dave@webaugur.com> 2.5.1
- Made spec a little more generic.
* Fri Oct 24 2003 David L Norris <dave@webaugur.com> 2.4.0-pr4-0
- Added new files and moved extra documentation and examples to a separate package.
* Mon Jun 30 2003 David L Norris <dave@webaugur.com> 2.4.0-pr1-1cefha
- Modified spec file to minimize dependences on CEFHA.org server.
* Thu Jun 19 2003 David L Norris <dave@webaugur.com> 2.4.0-pr1
- Updated RPM spec to provide recently added files
* Sun Apr 20 2003 David L Norris <dave@webaugur.com> 2.3.5
- Updated RPM to provide the SWISH-E helper scripts.
* Fri Mar 28 2003 David L Norris <dave@webaugur.com> 2.3.5
- Updated RPM for the new libtool-based 2.3.5 build system.
* Wed Dec 04 2002 David L Norris <dave@webaugur.com> 2.3-dev04
- Created RPM spec file
